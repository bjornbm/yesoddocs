User
    ident Text
    name Text Update
    admin Bool default=false
    handle UserHandle Eq
    email Text Maybe
    url Text Maybe
    bio Textarea Maybe
    UniqueUser ident
    UniqueHandle handle

TFamily
    created UTCTime

Topic
    owner UserId Eq
    title Text Update
    created UTCTime
    family TFamilyId
    allWrite Bool default=false Update

TopicContent
    topic TopicId Eq
    author UserId
    summary Text Maybe
    changed UTCTime Desc
    format TopicFormat
    content Text

TMap
    owner UserId Eq
    title Text
    created UTCTime

TMapNode
    map TMapId Eq
    parent TMapNodeId Maybe Eq
    position Int Asc
    ctopic TopicId Maybe
    cmap TMapId Maybe
    title Text Maybe
    slug MapNodeSlug
    UniqueMapNode map slug

NewsItem
    created UTCTime Desc
    title Text
    url Text
    content Html
    deriving

Page
    name Text
    topic TopicId
    UniquePage name

Label
    parent LabelId Maybe Eq Update
    name Text

TopicLabel
    topic TopicId Eq
    label LabelId
    UniqueTopicLabel topic label

MapLabel
    map TMapId Eq
    label LabelId
    UniqueMapLabel map label

Blog
    posted UTCTime Desc
    map TMapId
    slug BlogSlug Eq
    year Int
    month Int
    UniqueBlogSlug year month slug

Book -- singleton
    topic TopicId Maybe
    map TMapId
    chunking Int

StaticContent
    mimetype ByteString
    content ByteString

Comment
    topic TopicId Eq
    element Text Eq
    content TopicId
    time UTCTime Asc
